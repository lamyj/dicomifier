<!-- Dictionary For BRUKER <=> DICOM translator 
     Only available for Enhanced MR Image IOD   -->

<Dictionary>
    
    <DicomField tag="0008,0012" keyword="InstanceCreationDate" vr="DA">
        <DateGenerator />
    </DicomField>
    
    <DicomField tag="0008,0013" keyword="InstanceCreationTime" vr="TM">
        <TimeGenerator />
    </DicomField>

    <DicomField tag="0008,0016" keyword="SOPClassUID" vr="UI">
        <ConstantField values="1.2.840.10008.5.1.4.1.1.4.1" /> <!-- EnhancedMRImageStorage UID -->
    </DicomField>

    <DicomField tag="0008,0018" keyword="SOPInstanceUID" vr="UI">
        <UIDGenerator uidtype="SOPInstanceUID" />
    </DicomField>
    
    <DicomField tag="0008,0020" keyword="StudyDate" vr="DA">
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.*[[:space:]]{1}([0-9]{2}[[:space:]]{1}[a-zA-Z]{3}[[:space:]]{1}[0-9]{4}).*">
                <BrukerField name="VisuStudyDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0021" keyword="SeriesDate" vr="DA" >
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.*[[:space:]]{1}([0-9]{2}[[:space:]]{1}[a-zA-Z]{3}[[:space:]]{1}[0-9]{4}).*">
                <BrukerField name="VisuSeriesDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0030" keyword="StudyTime" vr="TM">
        <RegExFilter expression="^([0-9]{2}):{1}([0-9]{2}):{1}([0-9]{2}).*">
            <BrukerField name="VisuStudyDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0031" keyword="SeriesTime" vr="TM">
        <RegExFilter expression="^([0-9]{2}):{1}([0-9]{2}):{1}([0-9]{2}).*">
            <BrukerField name="VisuSeriesDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0050" keyword="AccessionNumber" vr="SH">
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0008,0060" keyword="Modality" vr="CS">
        <ConstantField values="MR" />
    </DicomField>

    <DicomField tag="0008,0070" keyword="Manufacturer" vr="LO">
        <BrukerField name="ORIGIN" />
    </DicomField>

    <DicomField tag="0008,0080" keyword="InstitutionName" vr="LO">
        <BrukerField name="VisuInstitution" />
    </DicomField>

    <DicomField tag="0008,0090" keyword="ReferringPhysicianName" vr="PN">
        <BrukerField name="VisuStudyReferringPhysician" />
    </DicomField>

    <DicomField tag="0008,1010" keyword="StationName" vr="SH">
        <BrukerField name="VisuStation" />
    </DicomField>

    <DicomField tag="0008,1030" keyword="StudyDescription" vr="LO">
        <BrukerField name="VisuStudyDescription" />
    </DicomField>

    <DicomField tag="0008,103e" keyword="SeriesDescription" vr="LO">
        <BrukerField name="VisuAcquisitionProtocol" />
    </DicomField>

    <DicomField tag="0008,1050" keyword="PerformingPhysicianName" vr="PN">
        <BrukerField name="OWNER" />
    </DicomField>

    <DicomField tag="0010,0010" keyword="PatientName" vr="PN">
        <BrukerField name="VisuSubjectName" />
    </DicomField>

    <DicomField tag="0010,0020" keyword="PatientID" vr="LO">
        <BrukerField name="VisuSubjectId" />
    </DicomField>

    <DicomField tag="0010,0030" keyword="PatientBirthDate" vr="DA">
        <BrukerField name="VisuSubjectBirthDate" />
    </DicomField>

    <DicomField tag="0010,0040" keyword="PatientSex" vr="CS">
        <PatientSexFilter>
            <BrukerField name="VisuSubjectSex" />
        </PatientSexFilter>
    </DicomField>

    <DicomField tag="0010,1030" keyword="PatientWeight" vr="DS">
        <BrukerField name="VisuSubjectWeight" />
    </DicomField>

    <!--DicomField tag="0010,2201" keyword="PatientSpeciesDescription" vr="LO">
        Not in Bruker data
    </DicomField-->

    <DicomField tag="0010,2203" keyword="PatientSexNeutered" vr="CS">
        <ConstantField values="UNKNOWN" />
    </DicomField>

    <DicomField tag="0010,2210" keyword="AnatomicalOrientationType" vr="CS">
        <UpperCaseGenerator>
            <BrukerField name="SUBJECT_type" />
        </UpperCaseGenerator>
    </DicomField>

    <!--DicomField tag="0010,2292" keyword="PatientBreedDescription" vr="LO">
        Not in Bruker data
    </DicomField-->

    <!--DicomField tag="0010,2294" keyword="BreedRegistrationSequence" vr="SQ">
        Not in Bruker data
    </DicomField-->

    <!--DicomField tag="0010,2297" keyword="ResponsiblePerson" vr="PN">
        Not in Bruker data
    </DicomField-->

    <!--DicomField tag="0010,2298" keyword="ResponsiblePersonRole" vr="CS">
        Not in Bruker data
    </DicomField-->

    <!--DicomField tag="0010,2299" keyword="ResponsibleOrganization" vr="LO">
        Not in Bruker data
    </DicomField-->

    <DicomField tag="0010,4000" keyword="PatientComments" vr="LT">
        <BrukerField name="VisuSubjectComment" />
    </DicomField>

    <DicomField tag="0018,1020" keyword="SoftwareVersions" vr="LO">
        <AdditionOperator>
            <BrukerField name="VisuCreator" />
            <BrukerField name="VisuCreatorVersion" />
        </AdditionOperator>
    </DicomField>

    <DicomField tag="0018,5100" keyword="PatientPosition" vr="CS">
        <PatientPositionFilter>
            <BrukerField name="VisuSubjectPosition" />
        </PatientPositionFilter>
    </DicomField>

    <DicomField tag="0020,000d" keyword="StudyInstanceUID" vr="UI">
        <BrukerField name="VisuStudyUid" />
    </DicomField>

    <DicomField tag="0020,000e" keyword="SeriesInstanceUID" vr="UI" >
        <BrukerField name="VisuUid" />
    </DicomField>

    <DicomField tag="0020,0010" keyword="StudyID" vr="SH">
        <ConditionField>
            <If>
                <BrukerFieldExist name="VisuStudyId" />
            </If>
            <Then>
                <BrukerField name="VisuStudyId" />
            </Then>
            <Else>
                <BrukerField name="VisuStudyNumber" />
            </Else>
        </ConditionField>
    </DicomField>
    
    <!--DicomField tag="0020,0011" keyword="SeriesNumber" vr="IS" >
        Extract from Bruker data Path
    </DicomField-->

    <!--DicomField tag="0020,0012" keyword="AcquisitionNumber" vr="IS" >
        Not Mandatory
    </DicomField-->

    <DicomField tag="0020,0013" keyword="InstanceNumber" vr="IS" >
        <InstanceNumberDcmField />
    </DicomField>

    <DicomField tag="0020,0052" keyword="FrameOfReferenceUID" vr="UI" >
        <BrukerField name="VisuUid" />
    </DicomField>

    <DicomField tag="0020,1040" keyword="PositionReferenceIndicator" vr="LO" >
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0020,4000" keyword="ImageComments" vr="LT" >
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0028,0002" keyword="SamplesPerPixel" vr="US" >
        <ConstantField values="1" />
    </DicomField>

    <DicomField tag="0028,0004" keyword="PhotometricInterpretation" vr="CS" >
        <ConstantField values="MONOCHROME2" />
    </DicomField>

    <DicomField tag="0028,0008" keyword="NumberOfFrames" vr="IS" >
        <BrukerField name="VisuCoreFrameCount" />
    </DicomField>

    <DicomField tag="0028,0010" keyword="Rows" vr="US" >
        <BrukerField name="VisuCoreSize" range="0,1" />
    </DicomField>

    <DicomField tag="0028,0011" keyword="Columns" vr="US" >
        <BrukerField name="VisuCoreSize" range="1,2" />
    </DicomField>

    <DicomField tag="0028,0030" keyword="PixelSpacing" vr="DS" >
        <DivisionOperator>
            <BrukerField name="VisuCoreExtent" />
            <BrukerField name="VisuCoreSize" />
        </DivisionOperator>
    </DicomField>

    <!--DicomField tag="0028,0100" keyword="BitsAllocated" vr="US" >
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0101" keyword="BitsStored" vr="US" >
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0102" keyword="HighBit" vr="US" >
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0103" keyword="Pixelrepresentation" vr="US" >
        Auto generate
    </DicomField-->

    <DicomField tag="5200,9229" keyword="SharedFunctionalGroupsSequence" vr="SQ" >
    </DicomField>
    
    <DicomField tag="5200,9230" keyword="PerFrameFunctionalGroupsSequence" vr="SQ" perframe="true" >
    </DicomField>
    
    <!--DicomField tag="7fe0,0010" keyword="PixelData" vr="OB" >
        Auto generate
    </DicomField-->

</Dictionary>
