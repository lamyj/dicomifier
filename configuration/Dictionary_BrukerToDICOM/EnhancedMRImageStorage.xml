<!-- Dictionary For BRUKER <=> DICOM translator 
     Only available for Enhanced MR Image IOD   -->

<Dictionary>
    
    <DicomField tag="0008,0012" keyword="InstanceCreationDate" vr="DA">
        <DateGenerator />
    </DicomField>
    
    <DicomField tag="0008,0013" keyword="InstanceCreationTime" vr="TM">
        <TimeGenerator />
    </DicomField>

    <DicomField tag="0008,0016" keyword="SOPClassUID" vr="UI">
        <ConstantField values="1.2.840.10008.5.1.4.1.1.4.1" /> <!-- EnhancedMRImageStorage UID -->
    </DicomField>

    <DicomField tag="0008,0018" keyword="SOPInstanceUID" vr="UI">
        <UIDGenerator uidtype="SOPInstanceUID" />
    </DicomField>
    
    <DicomField tag="0008,0020" keyword="StudyDate" vr="DA">
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.*[[:space:]]{1}([0-9]{2}[[:space:]]{1}[a-zA-Z]{3}[[:space:]]{1}[0-9]{4}).*">
                <BrukerField name="VisuStudyDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0021" keyword="SeriesDate" vr="DA" >
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.*[[:space:]]{1}([0-9]{2}[[:space:]]{1}[a-zA-Z]{3}[[:space:]]{1}[0-9]{4}).*">
                <BrukerField name="VisuSeriesDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0023" keyword="ContentDate" vr="DA" >
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.*[[:space:]]{1}([0-9]{2}[[:space:]]{1}[a-zA-Z]{3}[[:space:]]{1}[0-9]{4}).*">
                <BrukerField name="VisuAcqDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0030" keyword="StudyTime" vr="TM">
        <RegExFilter expression="^([0-9]{2}):{1}([0-9]{2}):{1}([0-9]{2}).*">
            <BrukerField name="VisuStudyDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0031" keyword="SeriesTime" vr="TM">
        <RegExFilter expression="^([0-9]{2}):{1}([0-9]{2}):{1}([0-9]{2}).*">
            <BrukerField name="VisuSeriesDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0033" keyword="ContentTime" vr="TM">
        <RegExFilter expression="^([0-9]{2}):{1}([0-9]{2}):{1}([0-9]{2}).*">
            <BrukerField name="VisuAcqDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0050" keyword="AccessionNumber" vr="SH">
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0008,0060" keyword="Modality" vr="CS">
        <ConstantField values="MR" />
    </DicomField>

    <DicomField tag="0008,0070" keyword="Manufacturer" vr="LO">
        <BrukerField name="ORIGIN" />
    </DicomField>

    <DicomField tag="0008,0080" keyword="InstitutionName" vr="LO">
        <BrukerField name="VisuInstitution" />
    </DicomField>

    <DicomField tag="0008,0090" keyword="ReferringPhysicianName" vr="PN">
        <BrukerField name="VisuStudyReferringPhysician" />
    </DicomField>

    <DicomField tag="0008,1010" keyword="StationName" vr="SH">
        <BrukerField name="VisuStation" />
    </DicomField>

    <DicomField tag="0008,1030" keyword="StudyDescription" vr="LO">
        <BrukerField name="VisuStudyDescription" />
    </DicomField>

    <DicomField tag="0008,103e" keyword="SeriesDescription" vr="LO">
        <BrukerField name="VisuAcquisitionProtocol" />
    </DicomField>

    <DicomField tag="0008,1050" keyword="PerformingPhysicianName" vr="PN">
        <BrukerField name="OWNER" />
    </DicomField>

    <DicomField tag="0008,1090" keyword="ManufacturerModelName" vr="LO">
        <ConstantField values="ToBeDefined" />
    </DicomField>

    <DicomField tag="0010,0010" keyword="PatientName" vr="PN">
        <BrukerField name="VisuSubjectName" />
    </DicomField>

    <DicomField tag="0010,0020" keyword="PatientID" vr="LO">
        <BrukerField name="VisuSubjectId" />
    </DicomField>

    <DicomField tag="0010,0030" keyword="PatientBirthDate" vr="DA">
        <BrukerField name="VisuSubjectBirthDate" />
    </DicomField>

    <DicomField tag="0010,0040" keyword="PatientSex" vr="CS">
        <PatientSexFilter>
            <BrukerField name="VisuSubjectSex" />
        </PatientSexFilter>
    </DicomField>

    <DicomField tag="0010,1030" keyword="PatientWeight" vr="DS">
        <BrukerField name="VisuSubjectWeight" />
    </DicomField>

    <DicomField tag="0010,2201" keyword="PatientSpeciesDescription" vr="LO">
        <ConstantField values="to be defined" />
    </DicomField>

    <DicomField tag="0010,2203" keyword="PatientSexNeutered" vr="CS">
        <ConstantField values="UNKNOWN" />
    </DicomField>

    <DicomField tag="0010,2210" keyword="AnatomicalOrientationType" vr="CS">
        <UpperCaseGenerator>
            <BrukerField name="SUBJECT_type" />
        </UpperCaseGenerator>
    </DicomField>

    <DicomField tag="0010,2292" keyword="PatientBreedDescription" vr="LO">
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0010,2294" keyword="BreedRegistrationSequence" vr="SQ">
        <!-- Empty Sequence -->
    </DicomField>

    <DicomField tag="0010,2297" keyword="ResponsiblePerson" vr="PN">
        <ConstantField values="" />
    </DicomField>

    <!--DicomField tag="0010,2298" keyword="ResponsiblePersonRole" vr="CS">
        Not in Bruker data
    </DicomField-->

    <DicomField tag="0010,2299" keyword="ResponsibleOrganization" vr="LO">
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0010,4000" keyword="PatientComments" vr="LT">
        <BrukerField name="VisuSubjectComment" />
    </DicomField>

    <DicomField tag="0018,1000" keyword="DeviceSerialNumber" vr="LO">
        <ConstantField values="ToBeDefined" />
    </DicomField>

    <DicomField tag="0018,1020" keyword="SoftwareVersions" vr="LO">
        <AdditionOperator>
            <BrukerField name="VisuCreator" />
            <BrukerField name="VisuCreatorVersion" />
        </AdditionOperator>
    </DicomField>

    <DicomField tag="0018,5100" keyword="PatientPosition" vr="CS">
        <PatientPositionFilter>
            <BrukerField name="VisuSubjectPosition" />
        </PatientPositionFilter>
    </DicomField>

    <DicomField tag="0020,000d" keyword="StudyInstanceUID" vr="UI">
        <BrukerField name="VisuStudyUid" />
    </DicomField>

    <DicomField tag="0020,000e" keyword="SeriesInstanceUID" vr="UI" >
        <BrukerField name="VisuUid" />
    </DicomField>

    <DicomField tag="0020,0010" keyword="StudyID" vr="SH">
        <ConditionField>
            <If>
                <BrukerFieldExist name="VisuStudyId" />
            </If>
            <Then>
                <BrukerField name="VisuStudyId" />
            </Then>
            <Else>
                <BrukerField name="VisuStudyNumber" />
            </Else>
        </ConditionField>
    </DicomField>
    
    <!--DicomField tag="0020,0011" keyword="SeriesNumber" vr="IS" >
        Extract from Bruker data Path
    </DicomField-->

    <!--DicomField tag="0020,0012" keyword="AcquisitionNumber" vr="IS" >
        Not Mandatory
    </DicomField-->

    <DicomField tag="0020,0013" keyword="InstanceNumber" vr="IS" >
        <InstanceNumberDcmField />
    </DicomField>

    <DicomField tag="0020,0052" keyword="FrameOfReferenceUID" vr="UI" >
        <BrukerField name="VisuUid" />
    </DicomField>

    <DicomField tag="0020,1040" keyword="PositionReferenceIndicator" vr="LO" >
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0020,4000" keyword="ImageComments" vr="LT" >
        <ConstantField values="" />
    </DicomField>
    
    <DicomField tag="0020,9221" keyword="DimensionOrganizationSequence" vr="SQ" >
    
        <DicomField tag="0020,9164" keyword="DimensionOrganizationUID" vr="UI" >
            <BrukerField name="VisuUid" />
        </DicomField>
    
    </DicomField>
    
    <!-- Sequence 0020,9222 with 2 items -->
    <DicomField tag="0020,9222" keyword="DimensionIndexSequence" vr="SQ" range="0,1" >
    
        <DicomField tag="0020,9164" keyword="DimensionOrganizationUID" vr="UI" >
            <BrukerField name="VisuUid" />
        </DicomField>
    
        <DicomField tag="0020,9165" keyword="DimensionIndexPointer" vr="AT" >
            <ConstantField values="0020,9056" />
        </DicomField>
    
        <DicomField tag="0020,9167" keyword="FunctionalGroupPointer" vr="AT" >
            <ConstantField values="0020,9111" />
        </DicomField>
    
    </DicomField>
    
    <DicomField tag="0020,9222" keyword="DimensionIndexSequence" vr="SQ" range="1,2" >
    
        <DicomField tag="0020,9164" keyword="DimensionOrganizationUID" vr="UI" >
            <BrukerField name="VisuUid" />
        </DicomField>
    
        <DicomField tag="0020,9165" keyword="DimensionIndexPointer" vr="AT" >
            <ConstantField values="0020,9057" />
        </DicomField>
    
        <DicomField tag="0020,9167" keyword="FunctionalGroupPointer" vr="AT" >
            <ConstantField values="0020,9111" />
        </DicomField>
        
    </DicomField>
    <!-- end of sequence 0020,9222 -->

    <DicomField tag="0028,0002" keyword="SamplesPerPixel" vr="US" >
        <ConstantField values="1" />
    </DicomField>

    <DicomField tag="0028,0004" keyword="PhotometricInterpretation" vr="CS" >
        <ConstantField values="MONOCHROME2" />
    </DicomField>

    <DicomField tag="0028,0008" keyword="NumberOfFrames" vr="IS" >
        <BrukerField name="VisuCoreFrameCount" />
    </DicomField>

    <DicomField tag="0028,0010" keyword="Rows" vr="US" >
        <BrukerField name="VisuCoreSize" range="0,1" />
    </DicomField>

    <DicomField tag="0028,0011" keyword="Columns" vr="US" >
        <BrukerField name="VisuCoreSize" range="1,2" />
    </DicomField>

    <DicomField tag="0028,0030" keyword="PixelSpacing" vr="DS" >
        <DivisionOperator>
            <BrukerField name="VisuCoreExtent" />
            <BrukerField name="VisuCoreSize" />
        </DivisionOperator>
    </DicomField>

    <!--DicomField tag="0028,0100" keyword="BitsAllocated" vr="US" >
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0101" keyword="BitsStored" vr="US" >
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0102" keyword="HighBit" vr="US" >
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0103" keyword="Pixelrepresentation" vr="US" >
        Auto generate
    </DicomField-->
    
    <DicomField tag="0028,0301" keyword="BurnedInAnnotation" vr="CS">
        <ConstantField values="NO" />
    </DicomField>
    
    <DicomField tag="0028,2110" keyword="LossyImageCompression" vr="CS">
        <ConstantField values="00" />
    </DicomField>
    
    <DicomField tag="0040,0555" keyword="AcquisitionContextSequence" vr="SQ">
        <!-- Empty sequence -->
    </DicomField>

    <DicomField tag="5200,9229" keyword="SharedFunctionalGroupsSequence" vr="SQ" >
        
        <DicomField tag="0028,9110" keyword="PixelMeasuresSequence" vr="SQ" >
            <DicomField tag="0028,0030" keyword="PixelSpacing" vr="DS" >
                <DivisionOperator>
                    <BrukerField name="VisuCoreExtent" />
                    <BrukerField name="VisuCoreSize" />
                </DivisionOperator>
            </DicomField>
            
            <DicomField tag="0018,0050" keyword="SliceThickness" vr="DS">
                <BrukerField name="VisuCoreFrameThickness" />
            </DicomField>
        </DicomField>
        
        <!--DicomField tag="0020,9145" keyword="PixelValueTransformationSequence" vr="SQ" >
            Auto generate
        </DicomField-->
        
    </DicomField>
    
    <DicomField tag="5200,9230" keyword="PerFrameFunctionalGroupsSequence" vr="SQ" perframe="true" >
        
        <DicomField tag="0018,9112" keyword="MRTimingAndRelatedParametersSequence" vr="SQ" >
            <DicomField tag="0018,0080" keyword="RepetitionTime" vr="DS">
                <BrukerField name="VisuAcqRepetitionTime" />
            </DicomField>
            
            <DicomField tag="0018,0091" keyword="EchoTrainLength" vr="IS">
                <BrukerField name="VisuAcqEchoTrainLength" />
            </DicomField>
            
            <DicomField tag="0018,1314" keyword="FlipAngle" vr="DS">
                <BrukerField name="VisuAcqFlipAngle" />
            </DicomField>
            
            <DicomField tag="0018,9240" keyword="RFEchoTrainLength" vr="US">
                <ConstantField values="0" />
            </DicomField>
            
            <DicomField tag="0018,9241" keyword="GradientEchoTrainLength" vr="US">
                <ConstantField values="0" />
            </DicomField>
        </DicomField>
        
        <DicomField tag="0018,9114" keyword="MREchoSequence" vr="SQ" >
            <DicomField tag="0018,9082" keyword="EffectiveEchoTime" vr="FD">
                <EffectiveEchoTimeField />
            </DicomField>
        </DicomField>
            
        <DicomField tag="0020,9111" keyword="FrameContentSequence" vr="SQ" >
            
            <DicomField tag="0018,9074" keyword="FrameAcquisitionDateTime" vr="DT" >
                <DateGenerator inputformat="%H:%M:%S %d %b %Y" outputformat="%Y%m%d%T">
                    <RegExFilter expression="^([0-9]{2}:{1}[0-9]{2}:{1}[0-9]{2}[[:space:]]{1}[0-9]{2}[[:space:]]{1}[a-zA-Z]{3}[[:space:]]{1}[0-9]{4}).*">
                        <BrukerField name="VisuAcqDate" />
                    </RegExFilter>
                </DateGenerator>
            </DicomField>
            
            <DicomField tag="0018,9151" keyword="FrameReferenceDateTime" vr="DT" >
                <DateGenerator inputformat="%H:%M:%S %d %b %Y" outputformat="%Y%m%d%T">
                    <RegExFilter expression="^([0-9]{2}:{1}[0-9]{2}:{1}[0-9]{2}[[:space:]]{1}[0-9]{2}[[:space:]]{1}[a-zA-Z]{3}[[:space:]]{1}[0-9]{4}).*">
                        <BrukerField name="VisuAcqDate" />
                    </RegExFilter>
                </DateGenerator>
            </DicomField>
            
            <DicomField tag="0018,9220" keyword="FrameAcquisitionDuration" vr="FD" >
                <ConstantField values="0" />
            </DicomField>
            
            <DicomField tag="0020,9056" keyword="StackID" vr="SH" >
                <StackIDDcmField />
            </DicomField>
            
            <DicomField tag="0020,9057" keyword="InStackPositionNumber" vr="UL" >
                <InStackPositionNumberDcmField />
            </DicomField>
            
            <DicomField tag="0020,9157" keyword="DimensionIndexValues" vr="UL" >
                <DimensionIndexValuesDcmField />
            </DicomField>
            
        </DicomField>
        
        <DicomField tag="0020,9113" keyword="PlanePositionSequence" vr="SQ" >
            <DicomField tag="0020,0032" keyword="ImagePositionPatient" vr="DS" >
                <ImagePositionPatientDcmField />
            </DicomField>
        </DicomField>
        
        <DicomField tag="0020,9116" keyword="PlaneOrientationSequence" vr="SQ" >
            <DicomField tag="0020,0037" keyword="ImageOrientationPatient" vr="DS" >
                <ImageOrientationPatientDcmField />
            </DicomField>
        </DicomField>
        
    </DicomField>
    
    <!--DicomField tag="7fe0,0010" keyword="PixelData" vr="OB" >
        Auto generate
    </DicomField-->
    
</Dictionary>
