<!-- Dictionary For BRUKER <=> DICOM translator 
     Only available for Enhanced MR Image IOD   -->

<Dictionary>
    
    <DicomField tag="0008,0008" keyword="ImageType" vr="CS">
        <!-- 4 values :
            - see PS3.03 Table C.8-127
            - see PS3.03 Table C.8-128
            - see PS3.03 Table C.8-129
            - see PS3.03 Table C.8-130 -->
        <ConstantField values="ORIGINAL\PRIMARY\STATIC\NONE" />
    </DicomField>
    
    <DicomField tag="0008,0012" keyword="InstanceCreationDate" vr="DA">
        <!-- Optional -->
        <DateGenerator />
    </DicomField>
    
    <DicomField tag="0008,0013" keyword="InstanceCreationTime" vr="TM">
        <!-- Optional -->
        <TimeGenerator />
    </DicomField>

    <DicomField tag="0008,0016" keyword="SOPClassUID" vr="UI">
        <!-- Required -->
        <ConstantField values="1.2.840.10008.5.1.4.1.1.4.1" /> <!-- EnhancedMRImageStorage UID -->
    </DicomField>

    <DicomField tag="0008,0018" keyword="SOPInstanceUID" vr="UI">
        <!-- Required -->
        <UIDGenerator uidtype="SOPInstanceUID" />
    </DicomField>
    
    <DicomField tag="0008,0020" keyword="StudyDate" vr="DA">
        <!-- Required - Can be empty -->
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.* (\d{2} \w{3} \d{4}).*">
                <BrukerField name="VisuStudyDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0021" keyword="SeriesDate" vr="DA" >
        <!-- Optional -->
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.* (\d{2} \w{3} \d{4}).*">
                <BrukerField name="VisuSeriesDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0023" keyword="ContentDate" vr="DA" >
        <!-- Required -->
        <DateGenerator inputformat="%d %b %Y" outputformat="%Y%m%d">
            <RegExFilter expression="^.* (\d{2} \w{3} \d{4}).*">
                <BrukerField name="VisuAcqDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>
    
    <DicomField tag="0008,002a" keyword="AcquisitionDateTime" vr="DT" >
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... and
                         0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <DateGenerator inputformat="%H:%M:%S %d %b %Y" outputformat="%Y%m%d%H%M%S">
            <RegExFilter expression="^(\d{2}:\d{2}:\d{2} \d{2} \w{3} \d{4}).*">
                <BrukerField name="VisuAcqDate" />
            </RegExFilter>
        </DateGenerator>
    </DicomField>

    <DicomField tag="0008,0030" keyword="StudyTime" vr="TM">
        <!-- Required - Can be empty -->
        <RegExFilter expression="^(\d{2}):(\d{2}):(\d{2}).*">
            <BrukerField name="VisuStudyDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0031" keyword="SeriesTime" vr="TM">
        <!-- Optional -->
        <RegExFilter expression="^(\d{2}):(\d{2}):(\d{2}).*">
            <BrukerField name="VisuSeriesDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0033" keyword="ContentTime" vr="TM">
        <!-- Required -->
        <RegExFilter expression="^(\d{2}):(\d{2}):(\d{2}).*">
            <BrukerField name="VisuAcqDate" />
        </RegExFilter>
    </DicomField>

    <DicomField tag="0008,0050" keyword="AccessionNumber" vr="SH">
        <!-- Required - Can be empty -->
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0008,0060" keyword="Modality" vr="CS">
        <!-- Required -->
        <!-- Possible values: see PS3.03 C.7.3.1.1.1 Modality -->
        <ConstantField values="MR" /> <!-- no other value for Enhanced MR Image -->
    </DicomField>

    <DicomField tag="0008,0070" keyword="Manufacturer" vr="LO">
        <!-- Required -->
        <BrukerField name="ORIGIN" />
    </DicomField>

    <DicomField tag="0008,0080" keyword="InstitutionName" vr="LO">
        <!-- Optional -->
        <BrukerField name="VisuInstitution" />
    </DicomField>

    <DicomField tag="0008,0090" keyword="ReferringPhysicianName" vr="PN">
        <!-- Required - Can be empty -->
        <BrukerField name="VisuStudyReferringPhysician" />
    </DicomField>

    <DicomField tag="0008,1010" keyword="StationName" vr="SH">
        <!-- Optional -->
        <BrukerField name="VisuStation" />
    </DicomField>

    <DicomField tag="0008,1030" keyword="StudyDescription" vr="LO">
        <!-- Optional -->
        <BrukerField name="VisuStudyDescription" />
    </DicomField>

    <DicomField tag="0008,103e" keyword="SeriesDescription" vr="LO">
        <!-- Optional -->
        <BrukerField name="VisuAcquisitionProtocol" />
    </DicomField>

    <DicomField tag="0008,1050" keyword="PerformingPhysicianName" vr="PN">
        <!-- Optional -->
        <BrukerField name="OWNER" />
    </DicomField>

    <DicomField tag="0008,1090" keyword="ManufacturerModelName" vr="LO">
        <!-- Required -->
        <ConstantField values="ToBeDefined" />
    </DicomField>

    <DicomField tag="0008,9205" keyword="PixelRepresentation" vr="CS">
        <!-- Required -->
        <!-- Possible values: COLOR / MONOCHROME / MIXED / TRUE_COLOR -->
        <ConstantField values="MONOCHROME" />
    </DicomField>

    <DicomField tag="0008,9206" keyword="VolumetricProperties" vr="CS">
        <!-- Required -->
        <!-- Possible values: VOLUME / SAMPLED / DISTORED / MIXED -->
        <ConstantField values="VOLUME" />
    </DicomField>

    <DicomField tag="0008,9207" keyword="VolumeBasedCalculationTechnique" vr="CS">
        <!-- Required -->
        <!-- Possible values: MAX_IP / MIN_IP / VOLUME_RENDER / SURFACE_RENDER /
                              MPR / CURVED_MPR / NONE / MIXED -->
        <ConstantField values="NONE" />
    </DicomField>

    <DicomField tag="0008,9208" keyword="ComplexImageComponent" vr="CS">
        <!-- Required if 0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <ComplexImageComponentDcmField perframe="false" />
    </DicomField>

    <DicomField tag="0008,9209" keyword="AcquisitionContrast" vr="CS">
        <!-- Required if 0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <ConstantField values="UNKNOWN" />
    </DicomField>

    <DicomField tag="0010,0010" keyword="PatientName" vr="PN">
        <!-- Required - Can be Empty -->
        <BrukerField name="VisuSubjectName" />
    </DicomField>

    <DicomField tag="0010,0020" keyword="PatientID" vr="LO">
        <!-- Required - Can be Empty -->
        <BrukerField name="VisuSubjectId" />
    </DicomField>

    <DicomField tag="0010,0030" keyword="PatientBirthDate" vr="DA">
        <!-- Required - Can be Empty -->
        <BrukerField name="VisuSubjectBirthDate" />
    </DicomField>

    <DicomField tag="0010,0040" keyword="PatientSex" vr="CS">
        <!-- Required - Can be Empty -->
        <!-- Possible values: M / F / O -->
        <PatientSexFilter>
            <BrukerField name="VisuSubjectSex" />
        </PatientSexFilter>
    </DicomField>

    <DicomField tag="0010,1030" keyword="PatientWeight" vr="DS">
        <!-- Optional -->
        <BrukerField name="VisuSubjectWeight" />
    </DicomField>

    <DicomField tag="0010,2201" keyword="PatientSpeciesDescription" vr="LO">
        <!-- Required if 0010,2202 is not present -->
        <ConstantField values="to be defined" />
    </DicomField>

    <DicomField tag="0010,2203" keyword="PatientSexNeutered" vr="CS">
        <!-- Required if patient is an animal - Can be empty -->
        <!-- Possible values: ALTERED / UNALTERED / -->
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0010,2210" keyword="AnatomicalOrientationType" vr="CS">
        <!-- Required if the patient is an animal -->
        <!-- Possible values: BIPED or QUADRUPED -->
        <ConstantField values="QUADRUPED" />
    </DicomField>

    <DicomField tag="0010,2292" keyword="PatientBreedDescription" vr="LO">
        <!-- Required if patient is an animal and 0010,2293 is empty -->
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0010,2293" keyword="PatientBreedCodeSequence" vr="SQ">
        <!-- Required if patient is an animal -->
        <!-- Empty Sequence -->
    </DicomField>
    
    <DicomField tag="0010,2294" keyword="BreedRegistrationSequence" vr="SQ">
        <!-- Required if patient is an animal -->
        <!-- Empty Sequence -->
    </DicomField>

    <DicomField tag="0010,2297" keyword="ResponsiblePerson" vr="PN">
        <!-- Required if patient is an animal - Can be empty -->
        <ConstantField values="" />
    </DicomField>

    <!--DicomField tag="0010,2298" keyword="ResponsiblePersonRole" vr="CS">
        <!-- Required if 0010,2297 is present and not empty ->
    </DicomField-->

    <DicomField tag="0010,2299" keyword="ResponsibleOrganization" vr="LO">
        <!-- Required if patient is an animal - Can be empty -->
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0010,4000" keyword="PatientComments" vr="LT">
        <!-- Optional -->
        <BrukerField name="VisuSubjectComment" />
    </DicomField>

    <DicomField tag="0018,0023" keyword="MRAcquisitionType" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: 1D / 2D / 3D -->
        <AdditionOperator>
            <BrukerField name="VisuCoreDim" />
            <ConstantField values="D" />
        </AdditionOperator>
    </DicomField>

    <DicomField tag="0018,0087" keyword="MagneticFieldStrength" vr="DS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... and
                         0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <!-- value in Tesla -->
        <ConstantField values="7" /> <!-- To be defined -->
    </DicomField>
        
    <DicomField tag="0018,1000" keyword="DeviceSerialNumber" vr="LO">
        <!-- Required -->
        <ConstantField values="ToBeDefined" />
    </DicomField>

    <DicomField tag="0018,1020" keyword="SoftwareVersions" vr="LO">
        <!-- Required -->
        <AdditionOperator>
            <BrukerField name="VisuCreator" />
            <BrukerField name="VisuCreatorVersion" />
        </AdditionOperator>
    </DicomField>
    
    <DicomField tag="0018,1030" keyword="ProtocolName" vr="LO">
        <!-- Optional -->
        <BrukerField name="VisuAcquisitionProtocol" />
    </DicomField>

    <DicomField tag="0018,5100" keyword="PatientPosition" vr="CS">
        <!-- Required for Enhanced MR Image and if 0054,0410 not present - Can be empty -->
        <PatientPositionFilter>
            <BrukerField name="VisuSubjectPosition" />
        </PatientPositionFilter>
    </DicomField>

    <DicomField tag="0018,9004" keyword="ContentQualification" vr="CS">
        <!-- Required if 0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <!-- Possible values: PRODUCT / RESEARCH / SERVICE -->
        <ConstantField values="RESEARCH" />
    </DicomField>
    
    <DicomField tag="0018,9005" keyword="PulseSequenceName" vr="SH">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <ConstantField values="Default" />
    </DicomField>
    
    <DicomField tag="0018,9008" keyword="EchoPulseSequence" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: SPIN / GRADIENT / BOTH -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9011" keyword="MultipleSpinEcho" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: YES / NO -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9012" keyword="MultiPlanarExcitation" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: YES / NO -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9014" keyword="PhaseContrast" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: YES / NO -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9015" keyword="TimeOfFlightContrast" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: YES / NO -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9017" keyword="SteadyStatePulseSequence" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: FREE_PRECESSION / TRANSVERSE / TIME_REVERSED / 
                              LONGITUDINAL / NONE -->
        <ConstantField values="NONE" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9018" keyword="EchoPlanarPulseSequence" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: YES / NO -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9024" keyword="SaturationRecovery" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: YES / NO -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9025" keyword="SpectrallySelectedSuppression" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: FAT / WATERFAT_AND_WATER / SILICON_GEL / NONE -->
        <ConstantField values="NONE" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9029" keyword="OversamplingPhase" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: 2D / 3D / 2D_3D / NONE -->
        <ConstantField values="NONE" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9032" keyword="GeometryOfKSpaceTraversal" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: RECTILINEAR / RADIAL / SPIRAL -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9033" keyword="SegmentedKSpaceTraversal" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <!-- Possible values: SINGLE / PARTIAL / FULL -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <!--DicomField tag="0018,9034" keyword="RectilinearPhaseEncodeReordering" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... and
                         0018,9032 == RECTILINEAR ->
        <!-- Possible values: LINEAR / CENTRIC / SEGMENTED / 
                              REVERSE_LINEAR / REVERSE_CENTRIC->
    </DicomField-->
    
    <DicomField tag="0018,9064" keyword="KSpaceFiltering" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... and
                         0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <!-- Possible values: COSINE / COSINE_SQUARED / FERMI / GAUSSIAN /
                              HAMMING / HANNING / LORENTZIAN / 
                              LRNTZ_GSS_TRNSFM / RIESZ / TUKEY / NONE -->
        <BrukerField name="NONE" />
    </DicomField>
    
    <DicomField tag="0018,9073" keyword="AcquisitionDuration" vr="FD">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... and
                         0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <ConstantField values="0" /> <!-- TODO -->
    </DicomField>
    
    <!--DicomField tag="0018,9092" keyword="VelocityEncodingAcquisitionSequence" vr="SQ">
        <!-- Required if 0018,9014 == YES ->
    </DicomField-->
    
    <DicomField tag="0018,9093" keyword="NumberOfKSpaceTrajectories" vr="US">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>
    
    <DicomField tag="0018,9100" keyword="ResonantNucleus" vr="CS">
        <!-- Required if 0008,0008 == ORIGINAL\... or MIXED\... and
                         0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <BrukerField name="VisuAcqImagedNucleus" />
    </DicomField>
    
    <DicomField tag="0018,9174" keyword="ApplicableSafetyStandardAgency" vr="CS">
        <!-- Required if 0008,0016 != 1.2.840.10008.5.1.4.1.1.4.4 -->
        <!-- Possible values: IEC / FDA / MHW -->
        <ConstantField values="" /> <!-- TODO -->
    </DicomField>

    <DicomField tag="0020,000d" keyword="StudyInstanceUID" vr="UI">
        <!-- Required -->
        <BrukerField name="VisuStudyUid" />
    </DicomField>

    <DicomField tag="0020,000e" keyword="SeriesInstanceUID" vr="UI" >
        <!-- Required -->
        <BrukerField name="VisuUid" />
    </DicomField>

    <DicomField tag="0020,0010" keyword="StudyID" vr="SH">
        <!-- Required - Can be empty -->
        <ConditionField>
            <If>
                <BrukerFieldExist name="VisuStudyId" />
            </If>
            <Then>
                <BrukerField name="VisuStudyId" />
            </Then>
            <Else>
                <BrukerField name="VisuStudyNumber" />
            </Else>
        </ConditionField>
    </DicomField>
    
    <!--DicomField tag="0020,0011" keyword="SeriesNumber" vr="IS" >
        <!-- Required - Can be empty ->
        Extract from Bruker data Path
    </DicomField-->

    <!--DicomField tag="0020,0012" keyword="AcquisitionNumber" vr="IS" >
        Not Mandatory
    </DicomField-->

    <DicomField tag="0020,0013" keyword="InstanceNumber" vr="IS" >
        <!-- Required -->
        <InstanceNumberDcmField />
    </DicomField>

    <DicomField tag="0020,0052" keyword="FrameOfReferenceUID" vr="UI" >
        <!-- Required -->
        <BrukerField name="VisuUid" />
    </DicomField>

    <DicomField tag="0020,1040" keyword="PositionReferenceIndicator" vr="LO" >
        <!-- Required - Can be empty -->
        <ConstantField values="" />
    </DicomField>

    <DicomField tag="0020,4000" keyword="ImageComments" vr="LT" >
        <ConstantField values="" />
    </DicomField>
    
    <DicomField tag="0020,9221" keyword="DimensionOrganizationSequence" vr="SQ" >
        <!-- Required - One or more items -->
    
        <DicomField tag="0020,9164" keyword="DimensionOrganizationUID" vr="UI" >
            <!-- Required -->
            <BrukerField name="VisuUid" />
        </DicomField>
    
    </DicomField>
    
    <!-- Required - Sequence 0020,9222 with 2 items -->
    <DicomField tag="0020,9222" keyword="DimensionIndexSequence" vr="SQ" range="0,1" >
    
        <DicomField tag="0020,9164" keyword="DimensionOrganizationUID" vr="UI" >
            <!-- Required -->
            <BrukerField name="VisuUid" />
        </DicomField>
    
        <DicomField tag="0020,9165" keyword="DimensionIndexPointer" vr="AT" >
            <!-- Required -->
            <ConstantField values="0020,9056" />
        </DicomField>
    
        <DicomField tag="0020,9167" keyword="FunctionalGroupPointer" vr="AT" >
            <!-- Required -->
            <ConstantField values="0020,9111" />
        </DicomField>
    
    </DicomField>
    
    <DicomField tag="0020,9222" keyword="DimensionIndexSequence" vr="SQ" range="1,2" >
    
        <DicomField tag="0020,9164" keyword="DimensionOrganizationUID" vr="UI" >
            <!-- Required -->
            <BrukerField name="VisuUid" />
        </DicomField>
    
        <DicomField tag="0020,9165" keyword="DimensionIndexPointer" vr="AT" >
            <!-- Required -->
            <ConstantField values="0020,9057" />
        </DicomField>
    
        <DicomField tag="0020,9167" keyword="FunctionalGroupPointer" vr="AT" >
            <!-- Required -->
            <ConstantField values="0020,9111" />
        </DicomField>
        
    </DicomField>
    <!-- end of sequence 0020,9222 -->

    <DicomField tag="0028,0002" keyword="SamplesPerPixel" vr="US" >
        <!-- Required -->
        <ConstantField values="1" />
    </DicomField>

    <DicomField tag="0028,0004" keyword="PhotometricInterpretation" vr="CS" >
        <!-- Required -->
        <ConstantField values="MONOCHROME2" />
    </DicomField>

    <DicomField tag="0028,0008" keyword="NumberOfFrames" vr="IS" >
        <!-- Required -->
        <BrukerField name="VisuCoreFrameCount" />
    </DicomField>

    <DicomField tag="0028,0010" keyword="Rows" vr="US" >
        <!-- Required -->
        <BrukerField name="VisuCoreSize" range="0,1" />
    </DicomField>

    <DicomField tag="0028,0011" keyword="Columns" vr="US" >
        <!-- Required -->
        <BrukerField name="VisuCoreSize" range="1,2" />
    </DicomField>

    <DicomField tag="0028,0030" keyword="PixelSpacing" vr="DS" >
        <DivisionOperator>
            <BrukerField name="VisuCoreExtent" />
            <BrukerField name="VisuCoreSize" />
        </DivisionOperator>
    </DicomField>

    <!--DicomField tag="0028,0100" keyword="BitsAllocated" vr="US" >
        <!-- Required ->
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0101" keyword="BitsStored" vr="US" >
        <!-- Required ->
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0102" keyword="HighBit" vr="US" >
        <!-- Required ->
        Auto generate
    </DicomField-->

    <!--DicomField tag="0028,0103" keyword="Pixelrepresentation" vr="US" >
        <!-- Required ->
        Auto generate
    </DicomField-->
    
    <DicomField tag="0028,0301" keyword="BurnedInAnnotation" vr="CS">
        <ConstantField values="NO" />
    </DicomField>
    
    <DicomField tag="0028,2110" keyword="LossyImageCompression" vr="CS">
        <ConstantField values="00" />
    </DicomField>
    
    <DicomField tag="0040,0555" keyword="AcquisitionContextSequence" vr="SQ">
        <!-- Required - Empty sequence -->
    </DicomField>

    <DicomField tag="2050,0020" keyword="PresentationLUTShape" vr="CS">
        <ConstantField values="IDENTITY" />
    </DicomField>
    
    <!-- Required - Only one item -->
    <DicomField tag="5200,9229" keyword="SharedFunctionalGroupsSequence" vr="SQ" >
        
        <DicomField tag="0020,9071" keyword="FrameAnatomySequence" vr="SQ">
            <DicomField tag="0008,2218" keyword="AnatomicRegionSequence" vr="SQ">
                <DicomField tag="0008,0100" keyword="CodeValue" vr="SH">
                    <ConstantField values="T-D0010" />
                </DicomField>
                
                <DicomField tag="0008,0102" keyword="CodingSchemeDesignator" vr="SH">
                    <ConstantField values="SRT" />
                </DicomField>
                
                <DicomField tag="0008,0104" keyword="CodeMeaning" vr="LO">
                    <ConstantField values="Entire body" />
                </DicomField>
            </DicomField>
            
            <DicomField tag="0020,9072" keyword="FrameLaterality" vr="CS">
                <ConstantField values="B" />
            </DicomField>
        </DicomField>
        
        <!--DicomField tag="0020,9145" keyword="PixelValueTransformationSequence" vr="SQ" >
            Auto generate
        </DicomField-->
        
        <DicomField tag="0028,9110" keyword="PixelMeasuresSequence" vr="SQ" >
            <DicomField tag="0028,0030" keyword="PixelSpacing" vr="DS" >
                <DivisionOperator>
                    <BrukerField name="VisuCoreExtent" />
                    <BrukerField name="VisuCoreSize" />
                </DivisionOperator>
            </DicomField>
            
            <DicomField tag="0018,0050" keyword="SliceThickness" vr="DS">
                <BrukerField name="VisuCoreFrameThickness" />
            </DicomField>
        </DicomField>
        
    </DicomField>
    
    <!-- Required - One item per frame -->
    <DicomField tag="5200,9230" keyword="PerFrameFunctionalGroupsSequence" vr="SQ" perframe="true" >
        
        <!-- MR Imaging Modifier Module:
             Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <DicomField tag="0018,9006" keyword="MRImagingModifierSequence" vr="SQ">
            <DicomField tag="0018,0095" keyword="PixelBandwidth" vr="DS">
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9019" keyword="TagAngleFirstAxis" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9028 != NONE ->
            </DicomField-->
            
            <DicomField tag="0018,9020" keyword="MagnetizationTransfer" vr="CS">
                <!-- Possible values: ON_RESONANCE / OFF_RESONANCE / NONE -->
                <ConstantField values="NONE" />
            </DicomField>
            
            <DicomField tag="0018,9022" keyword="BloodSignalNulling" vr="CS">
                <!-- Possible values: YES / NO -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <DicomField tag="0018,9028" keyword="Tagging" vr="CS">
                <!-- Possible values: GRID / LINE / NONE -->
                <ConstantField values="NONE" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9030" keyword="TagSpacingFirstDimension" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9028 != NONE ->
            </DicomField-->
            
            <!--DicomField tag="0018,9035" keyword="TagThickness" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9028 != NONE ->
            </DicomField-->
            
            <DicomField tag="0018,9098" keyword="TransmitterFrequency" vr="FD">
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9218" keyword="TagSpacingSecondDimension" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9028 == GRID ->
            </DicomField-->
            
            <!--DicomField tag="0018,9219" keyword="TagAngleSecondAxis" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9028 == GRID ->
            </DicomField-->
        </DicomField>
        
        <!-- MR Receive Coil Module:
             Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <DicomField tag="0018,9042" keyword="MRReceiveCoilSequence" vr="SQ">
            <DicomField tag="0018,1250" keyword="ReceiveCoilName" vr="SH">
                <!-- Required if 0008,9007 == ORIGINAL\... -->
                <ConstantField values="Default" />
            </DicomField>
            
            <DicomField tag="0018,9041" keyword="ReceiveCoilManufacturerName" vr="LO">
                <!-- Required if 0008,9007 == ORIGINAL\... -->
                <ConstantField values="" />
            </DicomField>
            
            <DicomField tag="0018,9043" keyword="ReceiveCoilType" vr="CS">
                <!-- Required if 0008,9007 == ORIGINAL\... -->
                <!-- Possible values: BODY / VOLUME / SURFACE / MULTICOIL -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <DicomField tag="0018,9044" keyword="QuadratureReceiveCoil" vr="CS">
                <!-- Required if 0008,9007 == ORIGINAL\... -->
                <!-- Possible values: YES / NO -->
                <ConstantField values="NO" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9045" keyword="MultiCoilDefinitionSequence" vr="SQ">
                <!-- Required if 0008,9007 == ORIGINAL\... and 0018,9043 == MULTICOIL ->
            </DicomField-->
        </DicomField>
        
        <!-- MR Transmit Coil Module:
             Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <DicomField tag="0018,9049" keyword="MRTransmitCoilSequence" vr="SQ">
            <DicomField tag="0018,1251" keyword="TransmitCoilName" vr="SH">
                <!-- Required if 0008,9007 == ORIGINAL\... -->
                <ConstantField values="Default" />
            </DicomField>
            
            <DicomField tag="0018,9050" keyword="TransmitCoilManufacturerName" vr="LO">
                <!-- Required if 0008,9007 == ORIGINAL\... -->
                <ConstantField values="" />
            </DicomField>
            
            <DicomField tag="0018,9051" keyword="TransmitCoilType" vr="CS">
                <!-- Required if 0008,9007 == ORIGINAL\... -->
                <!-- Possible values: BODY / VOLUME / SURFACE -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
        </DicomField>
        
        <DicomField tag="0018,9112" keyword="MRTimingAndRelatedParametersSequence" vr="SQ" >
            <DicomField tag="0018,0080" keyword="RepetitionTime" vr="DS">
                <BrukerField name="VisuAcqRepetitionTime" />
            </DicomField>
            
            <DicomField tag="0018,0091" keyword="EchoTrainLength" vr="IS">
                <BrukerField name="VisuAcqEchoTrainLength" />
            </DicomField>
            
            <DicomField tag="0018,1314" keyword="FlipAngle" vr="DS">
                <BrukerField name="VisuAcqFlipAngle" />
            </DicomField>
            
            <DicomField tag="0018,9240" keyword="RFEchoTrainLength" vr="US">
                <ConstantField values="0" />
            </DicomField>
            
            <DicomField tag="0018,9241" keyword="GradientEchoTrainLength" vr="US">
                <ConstantField values="0" />
            </DicomField>
        </DicomField>
        
        <!-- MR Echo Module:
             Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <DicomField tag="0018,9114" keyword="MREchoSequence" vr="SQ" >
            <DicomField tag="0018,9082" keyword="EffectiveEchoTime" vr="FD">
                <EffectiveEchoTimeDcmField />
            </DicomField>
        </DicomField>
        
        <!-- MR Modifier Module:
             Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <DicomField tag="0018,9115" keyword="MRModifierSequence" vr="SQ">
            <DicomField tag="0018,9009" keyword="InversionRecovery" vr="CS">
                <!-- Possible values: YES / NO -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <DicomField tag="0018,9010" keyword="FlowCompensation" vr="CS">
                <!-- Possible values: ACCELERATION / VELOCITY / OTHER / NONE -->
                <ConstantField values="NONE" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9016" keyword="Spoiling" vr="CS">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9008 == GRADIENT or BOTH ->
                <!-- Possible values: RF / GRADIENT / RF_AND_GRADIENT / NONE ->
            </DicomField-->
            
            <DicomField tag="0018,9021" keyword="T2Preparation" vr="CS">
                <!-- Possible values: YES / NO -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <DicomField tag="0018,9026" keyword="SpectrallySelectedExcitation" vr="CS">
                <!-- Possible values: WATER / FAT / NONE -->
                <ConstantField values="NONE" /> <!-- TODO -->
            </DicomField>
            
            <DicomField tag="0018,9027" keyword="SpacialPresaturation" vr="CS">
                <!-- Possible values: SLAB / NONE -->
                <ConstantField values="NONE" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9036" keyword="PartialFourierDirection" vr="CS">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9081 == YES ->
                <!-- Possible values: PHASE / FREQUENCY / SLICE_SELECT / 
                                      COMBINATION ->
            </DicomField-->
            
            <!--DicomField tag="0018,9069" keyword="ParallelReductionFactorInPlane" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9077 == YES ->
            </DicomField-->
            
            <DicomField tag="0018,9077" keyword="ParallelAcquistion" vr="CS">
                <!-- Possible values: YES / NO -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9078" keyword="ParallelAcquisitionTechnique" vr="CS">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9077 == YES ->
                <!-- Possible values: PILS / SENSE / SMASH / OTHER ->
            </DicomField-->
            
            <!--DicomField tag="0018,9079" keyword="InversionTimes" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9009 = YES ->
            </DicomField-->
            
            <DicomField tag="0018,9081" keyword="PartialFourier" vr="CS">
                <!-- Possible values: YES / NO -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
            
            <!--DicomField tag="0018,9155" keyword="ParallelReductionFactorOutOfPlane" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9077 == YES ->
            </DicomField-->
            
            <!--DicomField tag="0018,9168" keyword="ParallelReductionFactorSecondInPlane" vr="FD">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9077 == YES ->
            </DicomField-->
            
            <!--DicomField tag="0018,9183" keyword="FlowCompensationDirection" vr="CS">
                <!-- Required if 0008,9007 = ORIGINAL\... and 0018,9010 != NONE ->
                <!-- Possible values: PHASE / FREQUENCY / SLICE_SELECT / 
                                      SLICE_AND_FREQ / SLICE_FREQ_PHASE / 
                                      PHASE_AND_FREQ / SLICE_AND_PHASE / 
                                      OTHER ->
            </DicomField-->
        </DicomField>
        
        <!-- MR Averages Module:
             Required if 0008,0008 == ORIGINAL\... or MIXED\... -->
        <DicomField tag="0018,9119" keyword="MRAveragesSequence" vr="SQ" >
            <DicomField tag="0018,0083" keyword="NumberOfAverages" vr="DS">
                <!-- Required if 0008,9007 = ORIGINAL\... -->
                <ConstantField values="" /> <!-- TODO -->
            </DicomField>
        </DicomField>
        
        <DicomField tag="0018,9226" keyword="MRImageFrameTypeSequence" vr="SQ" >
            <DicomField tag="0008,9007" keyword="FrameType" vr="CS">
                <!-- 4 values :
                    - see PS3.03 Table C.8-127
                    - see PS3.03 Table C.8-128
                    - see PS3.03 Table C.8-129
                    - see PS3.03 Table C.8-130 -->
                <ConstantField values="ORIGINAL\PRIMARY\STATIC\NONE" />
            </DicomField>
            
            <DicomField tag="0008,9205" keyword="PixelPresentation" vr="CS">
                <ConstantField values="MONOCHROME" />
            </DicomField>
            
            <DicomField tag="0008,9206" keyword="VolumetricProperties" vr="CS">
                <ConstantField values="VOLUME" />
            </DicomField>
            
            <DicomField tag="0008,9207" keyword="VolumeBasedCalculationTechnique" vr="CS">
                <ConstantField values="NONE" />
            </DicomField>
            
            <DicomField tag="0008,9208" keyword="ComplexImageComponent" vr="CS">
                <ComplexImageComponentDcmField perframe="true" />
            </DicomField>
            
            <DicomField tag="0008,9209" keyword="AcquisitionContrast" vr="CS">
                <ConstantField values="UNKNOWN" />
            </DicomField>
        </DicomField>
            
        <DicomField tag="0020,9111" keyword="FrameContentSequence" vr="SQ" >
            
            <DicomField tag="0018,9074" keyword="FrameAcquisitionDateTime" vr="DT" >
                <DateGenerator inputformat="%H:%M:%S %d %b %Y" outputformat="%Y%m%d%H%M%S">
                    <RegExFilter expression="^(\d{2}:\d]{2}:\d{2} \d{2} \w{3} \d{4}).*">
                        <BrukerField name="VisuAcqDate" />
                    </RegExFilter>
                </DateGenerator>
            </DicomField>
            
            <DicomField tag="0018,9151" keyword="FrameReferenceDateTime" vr="DT" >
                <DateGenerator inputformat="%H:%M:%S %d %b %Y" outputformat="%Y%m%d%H%M%S">
                    <RegExFilter expression="^(\d{2}:\d]{2}:\d{2} \d{2} \w{3} \d{4}).*">
                        <BrukerField name="VisuAcqDate" />
                    </RegExFilter>
                </DateGenerator>
            </DicomField>
            
            <DicomField tag="0018,9220" keyword="FrameAcquisitionDuration" vr="FD" >
                <ConstantField values="0" />
            </DicomField>
            
            <DicomField tag="0020,9056" keyword="StackID" vr="SH" >
                <StackIDDcmField />
            </DicomField>
            
            <DicomField tag="0020,9057" keyword="InStackPositionNumber" vr="UL" >
                <InStackPositionNumberDcmField />
            </DicomField>
            
            <DicomField tag="0020,9157" keyword="DimensionIndexValues" vr="UL" >
                <DimensionIndexValuesDcmField />
            </DicomField>
            
        </DicomField>
        
        <DicomField tag="0020,9113" keyword="PlanePositionSequence" vr="SQ" >
            <DicomField tag="0020,0032" keyword="ImagePositionPatient" vr="DS" >
                <ImagePositionPatientDcmField />
            </DicomField>
        </DicomField>
        
        <DicomField tag="0020,9116" keyword="PlaneOrientationSequence" vr="SQ" >
            <DicomField tag="0020,0037" keyword="ImageOrientationPatient" vr="DS" >
                <ImageOrientationPatientDcmField />
            </DicomField>
        </DicomField>
        
    </DicomField>
    
    <!--DicomField tag="7fe0,0010" keyword="PixelData" vr="OB" >
        <!-- Required ->
        Auto generate
    </DicomField-->
    
</Dictionary>
